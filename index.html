<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í˜ë‚´ìš” ì˜¤ëŠ˜</title>

<link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:'Poor Story','Malgun Gothic','ë§‘ì€ ê³ ë”•',sans-serif;
  background:
    repeating-linear-gradient(
      45deg,
      #ffe4ec,
      #ffe4ec 20px,
      #ffd1e8 20px,
      #ffd1e8 40px
    );
  min-height:100svh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:12px;
}

/* ì œëª© ì´ë¯¸ì§€ ë°•ìŠ¤ */
.title-img{
  width:90%;
  max-width:420px;
  margin:14px 0 10px;
}
.title-img img{
  width:100%;
  display:block;
}

/* ì œëª© ê¸€ì */
.title-text{
  font-size:24px;
  color:#000;
  margin-bottom:8px;
}

/* ì•ˆë‚´ */
.subtitle{
  font-size:21px;
  font-weight:bold;
  margin:10px 0;
}

/* ìŒì‹ */
.gems-container{
  display:flex;
  gap:22px;
  margin:20px 0;
}

.gem{
  width:120px;
  height:120px;
  font-size:86px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.gem.clicked{
  opacity:0.4;
  filter:grayscale(1);
}

/* ì €ì¥ ìš”ì•½ ë°•ìŠ¤ */
.saved-summary{
  width:100%;
  max-width:440px;
  background:#fff;
  border:3px solid #ffb6d9;
  border-radius:22px;
  padding:18px;
  text-align:center;
  margin-bottom:20px;
  cursor:pointer;
}
.saved-summary h3{
  color:#ff69b4;
  font-size:22px;
}

/* ===== ì €ì¥ ëª©ë¡ ëª¨ë‹¬ ===== */
.saved-modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  z-index:2000;
}

.saved-modal-content{
  background:#fff;
  width:92%;
  max-width:420px;
  margin:40px auto;
  border-radius:24px;
  padding:20px;
  position:relative;
}

.close-x{
  position:absolute;
  top:14px;
  left:14px;
  font-size:22px;
  cursor:pointer;
}

.saved-item{
  background:#fff0f6;
  border-left:6px solid #ff69b4;
  border-radius:14px;
  padding:12px;
  margin-bottom:12px;
}

.saved-date{
  font-weight:bold;
  margin-bottom:4px;
}

.delete-btn{
  background:#ff6b6b;
  color:#fff;
  border:none;
  border-radius:12px;
  padding:6px 12px;
  font-size:13px;
  margin-top:6px;
  cursor:pointer;
}

/* í˜ì´ì§€ ë²„íŠ¼ */
.page-controls{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
}
.page-controls button{
  background:#ffb6d9;
  border:none;
  border-radius:16px;
  padding:8px 16px;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="title-img">
  <img src="title-box.png" alt="title">
</div>

<div class="title-text">ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ì‘ì›í•´ìš”</div>

<p class="subtitle">ì˜¤ëŠ˜ì˜ ì„ ë¬¼ì„ í´ë¦­í•´ ë³´ì„¸ìš”</p>

<div class="gems-container" id="gemsContainer"></div>

<!-- ì €ì¥ ìš”ì•½ -->
<div class="saved-summary" onclick="openSavedModal()">
  <h3>ì €ì¥í•œ ë©”ì‹œì§€ â­</h3>
</div>

<!-- ì €ì¥ ëª©ë¡ ëª¨ë‹¬ -->
<div class="saved-modal" id="savedModal">
  <div class="saved-modal-content">
    <div class="close-x" onclick="closeSavedModal()">âœ•</div>
    <div id="savedList"></div>

    <div class="page-controls">
      <button onclick="prevPage()">â—€ ì´ì „</button>
      <button onclick="nextPage()">ë‹¤ìŒ â–¶</button>
    </div>
  </div>
</div>

<script>
const foods=["ğŸ°","ğŸ§","ğŸª","ğŸ©","ğŸ«","ğŸ¬","ğŸ­","ğŸ®","ğŸ¦","ğŸ¨","ğŸ¥§","ğŸ§‡","ğŸ¥","ğŸ¯"];
let gemClicked=false;

let savedMessages=JSON.parse(localStorage.getItem("savedMessages"))||[];
let currentPage=0;
const perPage=5;

function renderFoods(){
  const pick=[...foods].sort(()=>0.5-Math.random()).slice(0,2);
  const box=document.getElementById("gemsContainer");
  box.innerHTML="";
  pick.forEach(f=>{
    const d=document.createElement("div");
    d.className="gem";
    d.textContent=f;
    d.onclick=()=>saveMessage();
    box.appendChild(d);
  });
}

function saveMessage(){
  if(gemClicked) return;
  gemClicked=true;

  const d=new Date();
  const date=`${d.getFullYear()}.${String(d.getMonth()+1).padStart(2,"0")}.${String(d.getDate()).padStart(2,"0")}`;

  savedMessages.unshift({
    date,
    message:"ë‹¹ì‹ ì€ ë” ë‚˜ì€ ë‚´ì¼ì„ ë§Œë“¤ì–´ê°€ê³  ìˆì–´ìš”"
  });

  localStorage.setItem("savedMessages",JSON.stringify(savedMessages));
  renderFoods();
}

function openSavedModal(){
  currentPage=0;
  renderSavedList();
  document.getElementById("savedModal").style.display="block";
}

function closeSavedModal(){
  document.getElementById("savedModal").style.display="none";
}

function renderSavedList(){
  const list=document.getElementById("savedList");
  const start=currentPage*perPage;
  const items=savedMessages.slice(start,start+perPage);

  if(items.length===0){
    list.innerHTML="<p style='text-align:center;color:#999;'>ì €ì¥ëœ ë©”ì‹œì§€ê°€ ì—†ì–´ìš”</p>";
    return;
  }

  list.innerHTML=items.map((it,i)=>`
    <div class="saved-item">
      <div class="saved-date">${it.date}</div>
      <div>${it.message}</div>
      <button class="delete-btn" onclick="deleteMessage(${start+i})">ì‚­ì œ</button>
    </div>
  `).join("");
}

function deleteMessage(idx){
  savedMessages.splice(idx,1);
  localStorage.setItem("savedMessages",JSON.stringify(savedMessages));
  renderSavedList();
}

function prevPage(){
  if(currentPage>0){
    currentPage--;
    renderSavedList();
  }
}
function nextPage(){
  if((currentPage+1)*perPage<savedMessages.length){
    currentPage++;
    renderSavedList();
  }
}

renderFoods();
</script>

</body>
</html>
